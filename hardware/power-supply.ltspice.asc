Version 4
SHEET 1 2852 1332
WIRE -400 -80 -400 -112
WIRE -160 -80 -400 -80
WIRE -128 -80 -160 -80
WIRE -16 -80 -64 -80
WIRE 96 -80 -16 -80
WIRE 592 -80 96 -80
WIRE 1712 -80 592 -80
WIRE 2768 -80 1712 -80
WIRE -160 -32 -160 -80
WIRE -16 -32 -16 -80
WIRE -160 80 -160 32
WIRE -112 80 -160 80
WIRE -16 80 -16 32
WIRE -16 80 -48 80
WIRE 48 80 -16 80
WIRE 592 112 592 -80
WIRE 640 112 592 112
WIRE 768 112 640 112
WIRE 1072 112 928 112
WIRE 1184 112 1072 112
WIRE 1264 112 1184 112
WIRE 1296 112 1264 112
WIRE 2176 112 1296 112
WIRE 2304 112 2176 112
WIRE 2768 112 2304 112
WIRE -400 128 -400 -80
WIRE 1072 192 1072 112
WIRE 2304 192 2304 112
WIRE 1264 256 1264 112
WIRE 1712 256 1712 -80
WIRE 2176 256 2176 112
WIRE -400 272 -400 208
WIRE 48 272 48 80
WIRE 48 272 -400 272
WIRE 1184 272 1184 112
WIRE 848 288 848 208
WIRE 1072 288 1072 272
WIRE 1072 288 848 288
WIRE 1072 304 1072 288
WIRE 640 336 640 112
WIRE 1568 400 1424 400
WIRE 1712 400 1712 320
WIRE 1712 400 1648 400
WIRE 1984 400 1712 400
WIRE 2176 400 2176 320
WIRE 2176 400 2064 400
WIRE 2304 400 2304 272
WIRE 2304 400 2176 400
WIRE 2768 400 2304 400
WIRE 1712 448 1712 400
WIRE -160 576 -160 80
WIRE 336 576 -160 576
WIRE 640 576 640 400
WIRE 640 576 336 576
WIRE 1072 576 1072 384
WIRE 1072 576 640 576
WIRE 1184 576 1184 336
WIRE 1184 576 1072 576
WIRE 1264 576 1264 336
WIRE 1264 576 1184 576
WIRE 1712 576 1712 512
WIRE 1712 576 1264 576
WIRE 2768 576 1712 576
WIRE 336 624 336 576
WIRE 96 880 96 -80
WIRE 48 896 -960 896
WIRE 48 944 -1040 944
WIRE -1040 992 -1040 944
WIRE 96 1008 96 960
WIRE 352 1008 96 1008
WIRE 1424 1008 1424 400
WIRE 1424 1008 352 1008
WIRE -960 1072 -960 896
WIRE -960 1072 -1040 1072
WIRE -1040 1104 -1040 1072
WIRE 96 1120 96 1008
WIRE -160 1200 -160 576
WIRE 96 1200 -160 1200
FLAG 336 624 0
FLAG -400 -112 A
FLAG 1296 112 Vout
FLAG 640 112 Vc
FLAG -1040 1104 0
FLAG 2768 400 Sense
FLAG 352 1008 Vswitch
SYMBOL voltage -400 112 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value SINE(0 14.5 50)
SYMBOL diode -128 -64 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMBOL diode -144 32 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMBOL diode -112 96 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMBOL diode 0 32 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D4
SYMBOL res 1056 176 R0
SYMATTR InstName R1
SYMATTR Value 200
SYMBOL res 1056 288 R0
SYMATTR InstName R2
SYMATTR Value 330R
SYMBOL cap 1168 272 R0
SYMATTR InstName C1
SYMATTR Value 10µ
SYMBOL cap 624 336 R0
SYMATTR InstName C2
SYMATTR Value 330µ
SYMBOL res 1248 240 R0
SYMATTR InstName Rload
SYMATTR Value 16.5
SYMBOL LM317 848 144 R0
SYMATTR InstName U2
SYMBOL ind 80 1104 R0
SYMATTR InstName L1
SYMATTR Value 10µH
SYMATTR SpiceLine Rser=5
SYMBOL voltage -1040 976 R0
WINDOW 3 -545 193 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PULSE(0 12 0.01 0.00000001 0.00000001 0.08 0.17 100)
SYMBOL sw 96 864 R0
SYMATTR InstName S1
SYMATTR Value MYSW
SYMBOL res 1664 384 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 1k
SYMBOL res 2288 176 R0
SYMATTR InstName R4
SYMATTR Value 20K
SYMBOL diode 1728 512 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D5
SYMBOL diode 1728 320 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D6
SYMBOL res 2080 384 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 1k
SYMBOL diode 2192 320 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D7
TEXT 304 632 Left 2 !.tran 0.5
TEXT -144 1264 Left 2 !.model MYSW SW(Ron=1 Roff=1Meg Vt=.5 Vh=-.4)
